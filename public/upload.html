<!DOCTYPE html>

<html>

<head>

    <script src="js/lib/jquery-1.8.1.min.js"></script>
    <script src="js/lib/underscore.js"></script>
    <script src="js/upload.js"></script>

    <script>

        var uploader = new Worker("js/upload.worker.js");

        uploader.addEventListener("message", onUploaderMessage);
        uploader.addEventListener("error", function (e) {
            console.log(e);
        }, false);


        function uploadInputChangeHandler(e) {
            _.each(e.target.files, function (file) {
                uploader.postMessage({
                    "cmd":"add",
                    "file":file,
                    "byteOffset":0,
                    "params":null,
                    "url":" http://.."
                });
            });
        }


        function onUploaderMessage(e) {
            console.log(event.data);
        }

        $(document).ready(function () {
            $("#uploadInput").on("change", uploadInputChangeHandler);
            $("#startBtn").on("click", start);
            $("#stopBtn").on("click", stop);
        });


    </script>

<body>


<input type="file" id="uploadInput" name="uploadInput" multiple/>
<button id="startBtn">Start</button>
<button id="stopBtn">Stop</button>

</body>
</html>